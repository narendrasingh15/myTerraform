# Description: Playbook to Install Ec2 instance having Key, SG, AZ etc allocated
resource "aws_instance" "Naren-Instance" {
  ami = "ami-04ea996e7a3e7ad6b"
  availability_zone = "ap-south-1b"
  key_name = "MyKeyPair"
  instance_type = "t2.micro"
  security_groups = ["myMumbaiSG"]
  tags {
    Name = "TestServer"
    Role = "Terraform-Testing"
  }
}
resource "null_resource" "my_remote-exe" {
  depends_on = ["aws_instance.Naren-Instance"]
  provisioner "remote-exec" {
    connection {
     host = "${aws_instance.Naren-Instance.public_ip}"
     user = "ubuntu"
     type = "ssh"
     private_key = "${file("./Keys/MyKeyPair.pem")}"
     timeout = "10m"
     agent = false
    }
    inline = [
      "sudo mv /tmp/index.html /var/www/html/index.html",
    ]
  }
}